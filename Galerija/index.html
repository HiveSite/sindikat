<!DOCTYPE html>
<html lang="sr">
<head>

        <link rel="icon" type="image/png" href="/favicon.png">

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sindikat – Galerija</title>
  <meta name="description" content="Sindikat – foto i video galerija naših događaja. Filtriraj po godini, lokaciji i tipu. Klikni za fullscreen, preuzimanje ili dijeljenje.">

  <!-- Fonts + Tailwind -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { montserrat: ['Montserrat','sans-serif'], inter: ['Inter','sans-serif'] },
          colors: { gold:'#FFD700', 'electric-blue':'#00BFFF' }
        }
      }
    }
  </script>

  <style>
    :root{ --nav-h:72px; }
    body{ padding-top:var(--nav-h); }
    html{ scroll-behavior:smooth; }

    .gradient-gold{ background:linear-gradient(135deg,#FFD700,#FFA500); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; }
    .gradient-blue{  background:linear-gradient(135deg,#00BFFF,#0080FF); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; }
    .tag{ border:1px solid rgba(255,255,255,.16); }
    .btn-animate{ position:relative; overflow:hidden; transition:transform .25s ease; }
    .btn-animate::before{content:'';position:absolute;inset:0;left:-120%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.22),transparent);transition:left .6s ease;}
    .btn-animate:hover::before{left:120%;}
    .btn-animate:hover{ transform:translateY(-2px);} 

    /* Lightbox */
    .modal-wrap{ position:fixed; inset:0; display:none; }
    .modal-wrap.active{ display:block; }

    /* Partners scroller */
    .partners-scroller{ -webkit-overflow-scrolling:touch; scroll-snap-type:x mandatory; overflow-x:auto; overflow-y:hidden; }
    .partners-scroller>div{ scroll-snap-align:start; }

    /* Hide scrollbar */
    .hide-scrollbar{ scrollbar-width:none; }
    .hide-scrollbar::-webkit-scrollbar{ display:none; }
  </style>
</head>

<body class="bg-black text-white font-inter">

  <!-- NAV (jedan, ujednačen) -->
  <nav class="fixed top-0 inset-x-0 z-50 bg-black/90 border-b border-neutral-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-[72px] flex items-center justify-between">
      <a href="https://sindikatevents.me/" class="text-2xl font-extrabold gradient-gold">SINDIKAT</a>

      <!-- Desktop meni -->
      <div class="hidden md:flex items-center gap-6 text-sm">
        <a href="https://sindikatevents.me/"         class="hover:text-gold transition-colors font-medium text-sm xl:text-base">Početna</a>
        <a href="https://sindikatevents.me/poslovi/" class="hover:text-gold transition-colors font-medium text-sm xl:text-base">Poslovi</a>
        <a href="https://sindikatevents.me/blog/"    class="hover:text-gold transition-colors font-medium text-sm xl:text-base">Blog</a>
        <a href="https://sindikatevents.me/galerija/"class="hover:text-gold transition-colors font-medium text-sm xl:text-base">Galerija</a>
        <a href="https://sindikatevents.me/onama/"   class="hover:text-gold transition-colors font-medium text-sm xl:text-base">O nama</a>
        <a href="https://sindikatevents.me/kontakt/" class="block px-4 py-2 rounded-xl bg-gold text-black font-semibold hover:brightness-95 transition">Kontakt</a>
      </div>

      <!-- Burger (CSS-only) -->
      <label for="mobileNav"
        class="md:hidden inline-flex items-center justify-center p-2 rounded-lg border border-neutral-800 hover:border-gold transition cursor-pointer"
        aria-label="Otvori meni">☰</label>
    </div>

    <!-- Kontrolni checkbox (peer) -->
    <input id="mobileNav" type="checkbox" class="peer sr-only" />

    <!-- MOBILE OVERLAY -->
    <div class="fixed inset-0 z-[60] bg-black/95 opacity-0 pointer-events-none transition-opacity duration-200 md:hidden
                peer-checked:opacity-100 peer-checked:pointer-events-auto">
      <!-- Close (X) -->
      <label for="mobileNav"
        class="absolute top-4 right-4 p-2 rounded-lg border border-neutral-800 hover:border-gold transition cursor-pointer"
        aria-label="Zatvori meni">
        <span class="text-2xl leading-none">×</span>
      </label>

      <!-- Linkovi (offset ispod nav bara) -->
      <div class="absolute top-[72px] left-0 right-0">
        <nav class="px-4 pt-4 pb-16 space-y-2">
          <a href="https://sindikatevents.me/"          class="block w-full px-4 py-4 rounded-xl border border-neutral-800 hover:border-gold transition">Početna</a>
          <a href="https://sindikatevents.me/poslovi/"  class="block w-full px-4 py-4 rounded-xl border border-neutral-800 hover:border-gold transition">Poslovi</a>
          <a href="https://sindikatevents.me/blog/"     class="block w-full px-4 py-4 rounded-xl border border-neutral-800 hover:border-gold transition">Blog</a>
          <a href="https://sindikatevents.me/galerija/" class="block w-full px-4 py-4 rounded-xl border border-neutral-800 hover:border-gold transition">Galerija</a>
          <a href="https://sindikatevents.me/onama/"    class="block w-full px-4 py-4 rounded-xl border border-neutral-800 hover:border-gold transition">O nama</a>
          <a href="https://sindikatevents.me/kontakt/"  class="block w-full px-4 py-4 rounded-xl bg-gold text-black font-semibold hover:brightness-95 transition">Kontakt</a>
        </nav>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header class="pt-28 pb-6 text-center max-w-3xl mx-auto px-4">
    <h1 class="text-4xl md:text-5xl font-bold font-montserrat">Foto & Video <span class="gradient-gold">Galerija</span></h1>
    <p class="mt-4 text-gray-300">Najbolji momenti sa naših događaja. Filtriraj po godini, lokaciji ili tipu – klikni na fotku za fullscreen, preuzmi ili podijeli.</p>
  </header>

  <!-- FILTER BAR -->
  <section class="border-y border-gray-800 bg-gray-900/40">
    <div class="max-w-7xl mx-auto px-4 md:px-6 py-4 flex flex-col md:flex-row gap-3 md:items-center md:justify-between">
      <div class="flex gap-3 items-center">
        <select id="yearSel" class="bg-black/70 border border-gray-800 rounded-xl px-3 py-2 text-sm focus:border-gold">
          <option value="all">Sve godine</option>
          <option>2025</option>
          <option>2024</option>
          <option>2023</option>
        </select>
        <select id="locSel" class="bg-black/70 border border-gray-800 rounded-xl px-3 py-2 text-sm focus:border-gold">
          <option value="all">Sve lokacije</option>
          <option>Podgorica</option>
          <option>Budva</option>
          <option>Kotor</option>
          <option>Tivat</option>
        </select>
        <select id="sortSel" class="bg-black/70 border border-gray-800 rounded-xl px-3 py-2 text-sm focus:border-gold">
          <option value="new">Najnovije</option>
          <option value="old">Najstarije</option>
          <option value="az">A–Ž</option>
        </select>
      </div>
      <div class="flex gap-3 items-center">
        <input id="searchInp" placeholder="Pretraga (npr. 'DJ', 'plaža')" class="w-full md:w-72 bg-black/70 border border-gray-800 rounded-xl px-3 py-2 text-sm focus:border-gold" />
        <button id="clearBtn" class="px-3 py-2 rounded-xl border border-gray-700 hover:border-gold text-sm">Reset</button>
      </div>
    </div>
  </section>

<!-- PARTNERI / BANERI (mobile: half height + scroll from first, desktop: centered normal height) -->
<style>
  /* Mobile default: half height — manji padding, manji logo, kompaktniji radius */
  .partners-scroller{
    display: flex;
    gap: 10px;
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
    scroll-padding-left: 12px;
  }
  .partners-scroller > .partner-card{ scroll-snap-align: start; }

  /* sakrij scrollbar, skrol i dalje radi */
  .hide-scrollbar::-webkit-scrollbar{ display:none; }
  .hide-scrollbar{ -ms-overflow-style:none; scrollbar-width:none; }

  /* MOBILE “pola visine” */
  .partner-card{
    padding: 6px 12px !important;      /* bilo ~py-3 px-6 */
    border-radius: 8px !important;      /* bilo 12px */
  }
  .partner-card .logo{
    width: 24px !important;             /* bilo 48px (w-12) */
    height: 24px !important;
  }
  .partner-card .kicker{ font-size: 10px !important; line-height: 1.15; }
  .partner-card .brand { font-size: 0.95rem !important; line-height: 1.15; }

  /* DESKTOP (≥ md): centrirano, bez skrola, normalna visina nazad */
  @media (min-width: 768px){
    .partners-scroller{
      justify-content: center;          /* centriraj red */
      overflow-x: visible;              /* nema horizontalnog skrola */
      scroll-snap-type: none;
      scroll-padding-left: 0;
      gap: 12px;
    }
    .partner-card{
      padding: 12px 24px !important;    /* normalna visina */
      border-radius: 12px !important;
    }
    .partner-card .logo{
      width: 48px !important;
      height: 48px !important;
    }
    .partner-card .kicker{ font-size: 12px !important; line-height: 1.2; }
    .partner-card .brand { font-size: 1rem !important; line-height: 1.2; }
  }
</style>

<section class="bg-gradient-to-r from-gray-900 via-black to-gray-900 py-3 px-4 md:px-6 border-b border-gray-800">
  <div id="partnersRow"
       class="max-w-7xl mx-auto partners-scroller hide-scrollbar -mx-3 px-3"
       role="list" aria-label="Naši partneri">
    
    <!-- Jägermeister -->
    <div class="partner-card min-w-[220px] bg-black/50 px-6 py-3 rounded-lg border border-red-500/30 flex items-center gap-3"
         role="listitem" tabindex="0" aria-label="Jägermeister, Drink partner">
      <img src="https://brandlogos.net/wp-content/uploads/2022/09/jagermeister-logo_brandlogos.net_pu6cx-512x512.png"
           alt="Jägermeister logo" class="logo w-12 h-12 object-contain">
      <div class="text-left">
        <div class="kicker text-red-500 text-xs font-semibold">DRINK PARTNER</div>
        <div class="brand font-bold">Jägermeister</div>
      </div>
    </div>

    <!-- Nikšićko Pivo -->
    <div class="partner-card min-w-[220px] bg-black/50 px-6 py-3 rounded-lg border border-yellow-400/30 flex items-center gap-3"
         role="listitem" tabindex="0" aria-label="Nikšićko Pivo, Beer partner">
      <img src="https://cdn.freebiesupply.com/logos/large/2x/niksicko-pivo-logo-png-transparent.png"
           alt="Nikšićko Pivo logo" class="logo w-12 h-12 object-contain">
      <div class="text-left">
        <div class="kicker text-yellow-400 text-xs font-semibold">BEER PARTNER</div>
        <div class="brand font-bold">Nikšićko Pivo</div>
      </div>
    </div>

    <!-- Ploom -->
    <div class="partner-card min-w-[220px] bg-black/50 px-6 py-3 rounded-lg border border-blue-400/30 flex items-center gap-3"
         role="listitem" tabindex="0" aria-label="Ploom, Premium partner">
      <img src="https://upload.wikimedia.org/wikipedia/commons/4/40/Ploom_logo.svg"
           alt="Ploom logo" class="logo w-12 h-12 object-contain bg-white rounded">
      <div class="text-left">
        <div class="kicker text-blue-400 text-xs font-semibold">PREMIUM PARTNER</div>
        <div class="brand font-bold">Ploom</div>
      </div>
    </div>

    <!-- Coca-Cola -->
    <div class="partner-card min-w-[220px] bg-black/50 px-6 py-3 rounded-lg border border-yellow-700/30 flex items-center gap-3"
         role="listitem" tabindex="0" aria-label="Jack Daniel's, Whiskey partner">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTBC47xKaD9UIlcYYCZLLyhI7YiIfeLleB_fg&s"
           alt="Jack Daniel's logo" class="logo w-12 h-12 object-contain bg-white rounded">
      <div class="text-left">
        <div class="kicker text-yellow-700 text-xs font-semibold">WHISKEY PARTNER</div>
        <div class="brand font-bold">Jack Daniel's</div>
      </div>
    </div>

    <!-- m:tel -->
    <div class="partner-card min-w-[220px] bg-black/50 px-6 py-3 rounded-lg border border-pink-400/30 flex items-center gap-3"
         role="listitem" tabindex="0" aria-label="m:tel, Tech partner">
      <img src="https://evessio.s3.amazonaws.com/customer/38fdd951-ed5d-49f2-82f3-ed13e29bcfce/event/94c15195-a9ef-4019-abd1-7ed898236d6c/media/2fa1eb0e-profile_MONKEY_SHOULDER_LOGO_PRIMARY_BLACK_Large.png"
           alt="m:tel logo" class="logo w-12 h-12 object-contain bg-white rounded">
      <div class="text-left">
        <div class="kicker text-pink-400 text-xs font-semibold">PARTNER</div>
        <div class="brand font-bold">Monkey Shoulder</div>
      </div>
    </div>

  </div>
</section>

<script>
  // Na mobilnom uvijek kreni od prvog elementa
  (function(){
    var row = document.getElementById('partnersRow');
    if(!row) return;
    function toStart(){ row.scrollLeft = 0; }
    if(document.readyState === 'loading'){
      document.addEventListener('DOMContentLoaded', toStart, { once:true });
    } else {
      toStart();
    }
  })();
</script>

  <!-- GALERIJA -->
  <main id="galerija" class="max-w-7xl mx-auto px-4 md:px-6 py-10">
    <div id="masonry" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>

    <div class="flex items-center justify-center mt-6">
      <button id="loadMore" class="px-5 py-3 rounded-full border border-gray-700 hover:border-gold btn-animate">Učitaj još</button>
    </div>

    <!-- Ad slot (opciono) -->
<!--    <div class="mt-10 bg-gray-800/50 border-2 border-dashed border-gray-600 rounded-3xl p-8 text-center hover:border-gold/50 transition-all">
      <div class="text-4xl mb-2">📣</div>
      <h3 class="text-lg font-bold font-montserrat mb-2 text-gray-300">PNG Ad Banner Slot</h3>
      <p class="text-gray-500 text-sm">336x280 / 728x90 – zadrži monetizaciju</p>
    </div>
  </main>

  <!-- FOOTER (samo kontakt) -->
 <footer class="bg-gray-900 py-16 px-6">
  <div class="max-w-7xl mx-auto">
    <div class="grid md:grid-cols-2 gap-12">

      <!-- Kolona 1: Brzi kontakt -->
      <div>
        <h4 class="text-lg font-semibold font-montserrat mb-6">Brzi Kontakt</h4>
        <div class="space-y-6">
          <a href="https://wa.me/38267123456" class="flex items-center space-x-4 p-4 bg-green-600 hover:bg-green-700 rounded-xl transition-all hover:scale-105 group">
            <div class="text-2xl">📱</div>
            <div>
              <h5 class="font-semibold">WhatsApp</h5>
              <p class="text-sm">+382 67 506 440</p>
              <p class="text-xs text-green-100">Najbrži odgovor - obično u roku od nekoliko minuta</p>
            </div>
          </a>
          <a href="https://instagram.com/sindikat_events" class="flex items-center space-x-4 p-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-700 hover:to-purple-700 rounded-xl transition-all hover:scale-105 group">
            <div class="text-2xl">📸</div>
            <div>
              <h5 class="font-semibold">Instagram</h5>
              <p class="text-sm">@sindikat_events</p>
              <p class="text-xs text-pink-100">Pogledajte naše najnovije događaje i iza kulisa</p>
            </div>
          </a>
          <div class="flex items-center space-x-4 p-4 bg-gray-800 rounded-xl">
            <div class="text-2xl">📞</div>
            <div>
              <h5 class="font-semibold">Telefon</h5>
              <p class="text-sm">+382 67 506 440</p>
              <p class="text-xs text-gray-400">Dostupni Pon-Pet 9-18h</p>
            </div>
          </div>
          <div class="flex items-center space-x-4 p-4 bg-gray-800 rounded-xl">
            <div class="text-2xl">📍</div>
            <div>
              <h5 class="font-semibold">Lokacija</h5>
              <p class="text-sm">Podgorica, Crna Gora</p>
              <p class="text-xs text-gray-400">Služimo celu Crnu Goru</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Kolona 2: Dugme za kontakt --> 
      <div class="flex flex-col justify-center">
        <h4 class="text-lg font-semibold font-montserrat mb-6">Kontaktirajte nas</h4>
        <a href="https://sindikatevents.me/kontakt/"
           class="inline-block text-center bg-gold text-black font-bold px-6 py-4 rounded-full hover:bg-yellow-500 transition-all hover:scale-105">
          Idi na Kontakt Stranicu
        </a>
      </div>
    </div>

    <!-- Donji red -->
    <div class="border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center">
      <p class="text-gray-400">&copy; 2024 Sindikat. Sva prava zadržana.</p>
      <p class="text-gray-500 text-sm mt-4 md:mt-0">Napravljeno sa ⚡ za nezaboravne događaje</p>
    </div>
  </div>
</footer>

  <!-- LIGHTBOX / MODAL -->
  <div id="modal" class="modal-wrap bg-black/80 backdrop-blur-sm">
    <div class="absolute inset-0" id="modalBg"></div>
    <div class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[94vw] max-w-5xl">
      <div class="rounded-2xl bg-black border border-gray-800 p-4 md:p-6">
        <div class="flex items-start justify-between gap-4">
          <div>
            <h3 id="mTitle" class="text-lg md:text-xl font-bold font-montserrat"></h3>
            <p id="mMeta" class="text-xs md:text-sm text-gray-400 mt-1"></p>
          </div>
          <button id="modalClose" class="text-2xl leading-none">×</button>
        </div>
        <div class="mt-4">
          <img id="mImg" alt="preview" class="w-full rounded-xl object-contain max-h-[80vh]" />
        </div>
        <div class="mt-4 flex flex-wrap items-center gap-2 justify-between">
          <div id="mTags" class="flex gap-2 flex-wrap text-sm"></div>
          <div class="flex gap-2">
            <a id="dlBtn" class="px-3 py-2 rounded-lg border border-gray-700 hover:border-gold text-sm cursor-pointer">Preuzmi</a>
            <a id="waBtn" target="_blank" class="px-3 py-2 rounded-lg border border-gray-700 hover:border-gold text-sm">WhatsApp</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script>
    const masonry = document.getElementById('masonry');
    const perPage = 6; let shown = 0; let curFilter = 'all';

    // Kontrole
    const yearSel = document.getElementById('yearSel');
    const locSel  = document.getElementById('locSel');
    const sortSel = document.getElementById('sortSel');
    const searchInp = document.getElementById('searchInp');

    // Mockup ITEMS (thumb + full)
    const ITEMS = [
  {
    id:'g1',
    title:'Konferencija – LED stage',
    cat:'korporativni',
    year:2025,
    loc:'Podgorica',
    tags:['stage','ozvučenje','LED'],
    img:'https://ksatoronto.com/wp-content/uploads/2019/11/MSLE-Expo-IMG_4337-scaled-e1574181550589.jpg',
    thumb:'https://ksatoronto.com/wp-content/uploads/2019/11/MSLE-Expo-IMG_4337-scaled-e1574181550589.jpg'
  },
  {id:'g2', title:'Plažni team building',     cat:'team',        year:2025, loc:'Budva',     tags:['plaža','igre','DJ'],       img:'https://programs.seminaire.com/uploads/seminaire_entreprise_plage_315bbcd652.jpg', thumb:'https://programs.seminaire.com/uploads/seminaire_entreprise_plage_315bbcd652.jpg'},
  {id:'g3', title:'Vjenčanje – seaside',      cat:'vjenčanja',   year:2024, loc:'Kotor',     tags:['dekor','bend','seaside'],  img:'https://i.pinimg.com/originals/66/83/61/668361f892174e03378f2e92d21b43dc.jpg', thumb:'https://i.pinimg.com/originals/66/83/61/668361f892174e03378f2e92d21b43dc.jpg'},
  {id:'g4', title:'Privatna žurka – lounge',  cat:'privatne',    year:2024, loc:'Podgorica', tags:['lounge','kokteli'],        img:'https://media.istockphoto.com/id/641775168/photo/young-men-and-women-enjoying-a-party.jpg?s=612x612&w=0&k=20&c=AJDCeuX1OAVt93nGt3wuZ0riuvZTvyOmY0MMTeF9w2o=', thumb:'https://media.istockphoto.com/id/641775168/photo/young-men-and-women-enjoying-a-party.jpg?s=612x612&w=0&k=20&c=AJDCeuX1OAVt93nGt3wuZ0riuvZTvyOmY0MMTeF9w2o='},
  {id:'g5', title:'Festival craft koktela',   cat:'festival',    year:2023, loc:'Tivat',     tags:['cocktail','bar'],          img:'https://www.tempetourism.com/wp-content/uploads/Alibi-Cocktails-Header-5_17_2024.jpg', thumb:'https://www.tempetourism.com/wp-content/uploads/Alibi-Cocktails-Header-5_17_2024.jpg'},
  {id:'g6', title:'STEM događaj – streaming', cat:'korporativni',year:2023, loc:'Podgorica', tags:['stream','radionice'],      img:'https://media.istockphoto.com/id/1455946567/photo/college-instructor-assisting-electrical-engineering-students.jpg?s=612x612&w=0&k=20&c=NZk9l0sivK3QijpQ9Efc0833A9My4sp2frwIoUejZ98=', thumb:'https://media.istockphoto.com/id/1455946567/photo/college-instructor-assisting-electrical-engineering-students.jpg?s=612x612&w=0&k=20&c=NZk9l0sivK3QijpQ9Efc0833A9My4sp2frwIoUejZ98='},
  {id:'g7', title:'Wedding first dance',       cat:'vjenčanja',   year:2025, loc:'Kotor',     tags:['first-dance','light'],     img:'https://www.123weddingcards.com/blog/wp-content/uploads/2022/07/this-scripps-seaside-forum-wedding-brought-glitz-and-glam-to-the-beach-by-amy-lynn-photography-56-700x467-1.jpg', thumb:'https://www.123weddingcards.com/blog/wp-content/uploads/2022/07/this-scripps-seaside-forum-wedding-brought-glitz-and-glam-to-the-beach-by-amy-lynn-photography-56-700x467-1.jpg'},
  {id:'g8', title:'Open air DJ set',           cat:'festival',    year:2025, loc:'Budva',     tags:['DJ','lightshow'],          img:'https://images.stockcake.com/public/b/2/8/b285ae51-0e9d-4653-a6cf-1e26580778c9_large/outdoor-dj-setup-stockcake.jpg', thumb:'https://images.stockcake.com/public/b/2/8/b285ae51-0e9d-4653-a6cf-1e26580778c9_large/outdoor-dj-setup-stockcake.jpg'},
  {id:'g9', title:'Corporate award night',     cat:'korporativni',year:2024, loc:'Podgorica', tags:['awards','photowall'],      img:'https://i.pinimg.com/736x/85/a6/c0/85a6c0bb87ad2587312712a403f5b9fd.jpg', thumb:'https://i.pinimg.com/736x/85/a6/c0/85a6c0bb87ad2587312712a403f5b9fd.jpg'}
];

    function applyFilters(list){
      return list
        .filter(x => (curFilter==='all' || x.cat===curFilter))
        .filter(x => (yearSel.value==='all' || String(x.year)===yearSel.value))
        .filter(x => (locSel.value==='all'  || x.loc===locSel.value))
        .filter(x => {
          const q = searchInp.value.trim().toLowerCase();
          if(!q) return true;
          const inTags = x.tags.join(' ').toLowerCase();
          return x.title.toLowerCase().includes(q) || inTags.includes(q) || x.loc.toLowerCase().includes(q);
        })
        .sort((a,b)=>{
          if(sortSel.value==='new') return b.year - a.year;
          if(sortSel.value==='old') return a.year - b.year;
          return a.title.localeCompare(b.title);
        });
    }

    function render(reset=false){
      const filtered = applyFilters(ITEMS);
      if(reset){ shown = 0; masonry.innerHTML=''; }
      const next = filtered.slice(shown, shown+perPage);
      const html = next.map(x=>`
        <figure class="rounded-2xl overflow-hidden border border-gray-800 group">
          <a href="#${x.id}" data-open="${x.id}" class="block relative">
            <img src="${x.thumb}" loading="lazy" alt="${x.title}" class="w-full aspect-[4/3] object-cover" />
            <figcaption class="absolute inset-x-0 bottom-0 p-4 bg-gradient-to-t from-black/80 to-transparent">
              <div class="text-sm text-gray-300 flex items-center justify-between gap-3">
                <span class="font-semibold">${x.title}</span>
                <span class="px-2 py-0.5 rounded-full text-xs border border-gray-700">${x.cat}</span>
              </div>
            </figcaption>
          </a>
        </figure>`).join('');
      masonry.insertAdjacentHTML('beforeend', html);
      shown += next.length;
      const lm = document.getElementById('loadMore');
      lm.disabled = shown >= filtered.length;
      lm.classList.toggle('opacity-50', lm.disabled);
    }

    // Filter kontrole
    yearSel.addEventListener('change', ()=>render(true));
    locSel.addEventListener('change',  ()=>render(true));
    sortSel.addEventListener('change', ()=>render(true));
    searchInp.addEventListener('input',()=>render(true));
    document.getElementById('clearBtn').addEventListener('click',()=>{
      curFilter='all'; yearSel.value='all'; locSel.value='all'; sortSel.value='new'; searchInp.value='';
      render(true);
    });
    document.getElementById('loadMore').addEventListener('click',()=>render());

    // LIGHTBOX (modal)
    const modal  = document.getElementById('modal');
    const mImg   = document.getElementById('mImg');
    const mTitle = document.getElementById('mTitle');
    const mMeta  = document.getElementById('mMeta');
    const mTags  = document.getElementById('mTags');

    function openModal(x){
      mImg.src = x.img; mTitle.textContent = x.title;
      mMeta.textContent = `${x.loc} • ${x.year}`;
      mTags.innerHTML = x.tags.map(t=>`<span class='px-2 py-1 rounded-full border border-gray-700'>#${t}</span>`).join('');
      const url = new URL(window.location); url.hash = x.id; history.replaceState(null,'',url);
      document.getElementById('dlBtn').setAttribute('href', x.img);
      document.getElementById('dlBtn').setAttribute('download', x.id + '.jpg');
      document.getElementById('waBtn').setAttribute('href', `https://wa.me/?text=${encodeURIComponent(x.title+' '+url.toString())}`);
      modal.classList.add('active');
    }
    function closeModal(){ modal.classList.remove('active'); }
    document.getElementById('modalClose').addEventListener('click', closeModal);
    document.getElementById('modalBg').addEventListener('click', closeModal);

    // Delegacija za otvaranje
    document.addEventListener('click', (e)=>{
      const a = e.target.closest('a[data-open]');
      if(a){ e.preventDefault(); const id=a.dataset.open; const x = ITEMS.find(i=>i.id===id); if(x) openModal(x); }
    });

    // Init
    render(true);

    // Direktan hash
    if(location.hash){
      const id = location.hash.replace('#','');
      const x = ITEMS.find(i=>i.id===id);
      if(x) openModal(x);
    }
  </script>
</body>
</html>
